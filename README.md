# merch
 Тестовое задание для компании Авито
 
  ![Build Status](https://github.com/QuickSilver-1/merch/actions/workflows/go.yml/badge.svg)

 <h3>Прототип сервиса продажи мерчендайза</h3>

 <h2>Структура проекта</h2>

<h3>Запуск сервера</h3>
<h4>Настраиваем env file ---> <code>docker-compose up</code></h4>


<h3>Общее описание</h3>
Спасибо за интересную задачу, было интересно делать. Реализовал все необходимые функции, кроме нагрузочного тестирования. Аунтификация реализована через JWT. После входа в систему выдается токен, который затем необходимо передавать через Заголовок <code>Auntification</code> с <code>Bearer</code>. Программа разделена на 4 слоя - доменный - основные структуры, интерфейсы для взаимодействия с сервисами и сторонними приложениями, сервисный - бизнес-логика приложения, а также presentation - реализации репозиториев, а также ручки для и REST API сервера.
<h4>Спецификацию api можно посмотреть в папке api</h4>
<h4>Coverage - файл с тестовым покрытием репозитория</h4>

<h3>Стек</h3>
<ol>
 <li>Golang</li>
 <li>PostgreSQL</li>
 <li>Gin Framework</li>
</ol>

<h3>Вопросы</h3>
<ol>
 <li>Как должна быть реализована авторизация? - в спецификации под авторизацию есть только 1 ручка, значит нельзя использовать полноценную JWT авторизацию с access и refresh токенами, а значит нужно придумать другие средства защиты. Я решил, что нужно сохранять токен в базе данных, чтобы была возможность отозвать этот токен в случае взлома</li>
 <li>Что нужно использовать в качестве <code>username</code>? - буду использовать самый распространненый вариант - EMAIL</li>
 <li>Нужно ли добавлять кэширование? - не стал, так как в стеке не указаны кэш базы</li>
 <li>Нужно ли добавлять брокер очередей? - не стал, аналогично с кэшем - нет в требованиях, хотя хорошо сюда встанет</li>
</ol>

<h3>Структура репозитория</h3>
<code>Merch
├───api - файл со спецификацией swagger
├───cmd
│   └───merch - файл с точкой влохо (mail)
├───internal
│   ├───domain - доменный слой с основными структурами данных
│   ├───interfaces - репозитории для унифицированной работы с сервисами и сторонними приложениями
│   ├───presentation - слой презентации, реализации интерфейсов
│   │   ├───customError - пакет с ошибками
│   │   ├───migrations - файл с миграциями базы данных
│   │   ├───postgres - пакет для работы с базой данных PostgreSQL
│   │   ├───realization - реализации интерфейсов
│   │   └───server - пакет с http сервером
│   └───services - сервисный слой, бизнес-логика
├───test
│   ├───mocks - пакет с моковыми сервисами
│   └───tests - E2E тесты
│───coverage - файл с тестовым покрытием <code>go tool cover --html=coverage</code> - для просмотра
│───Dockerfile
└────docker-compose.yml
 
</code>
